# 如何查看 Android 应用崩溃日志

## 方法 1：使用 Android Studio Logcat（推荐）

1. **打开 Android Studio**
2. **连接手机**（通过 USB 或 WiFi）
3. **打开 Logcat 窗口**：
   - 点击底部工具栏的 "Logcat" 标签
   - 或菜单：View → Tool Windows → Logcat

4. **过滤日志**：
   - 在搜索框输入：`BeatUApp|MainActivity|RecommendFragment|RecommendViewModel|AndroidRuntime|FATAL`
   - 或选择 "Show only selected application" 查看当前应用的日志

5. **查看崩溃信息**：
   - 查找红色标记的 `FATAL EXCEPTION`
   - 查看完整的堆栈跟踪（Stack Trace）

## 方法 2：使用 ADB 命令行

### 查看实时日志
```bash
# 查看所有日志
adb logcat

# 只查看错误和致命错误
adb logcat *:E *:F

# 过滤特定标签
adb logcat | grep -E "BeatUApp|MainActivity|RecommendFragment|AndroidRuntime|FATAL"

# 保存日志到文件
adb logcat > crash_log.txt
```

### 查看崩溃报告
```bash
# 查看崩溃报告
adb logcat -b crash

# 导出崩溃日志到文件
adb logcat -b crash > crash_report.txt
```

## 方法 3：在手机上查看

1. **使用 Log Viewer 应用**（需要 root）
2. **使用开发者选项**：
   - 设置 → 开发者选项 → 错误报告
   - 生成错误报告并分享

## 方法 4：使用 Android Studio 的 Run 窗口

1. 运行应用时，在底部的 "Run" 窗口中可以看到实时日志
2. 崩溃时会自动显示错误信息

## 常见崩溃原因排查

### 1. Hilt 注入失败
- 检查 `MainActivity` 是否有 `@AndroidEntryPoint`
- 检查 `Application` 类是否有 `@HiltAndroidApp`
- 检查 `AndroidManifest.xml` 中是否正确注册了 Application

### 2. 空指针异常
- 查看堆栈跟踪，找到 `NullPointerException` 的位置
- 检查相关变量是否为 null

### 3. 资源找不到
- 检查布局文件中的资源 ID 是否存在
- 检查 drawable、string 等资源是否正确

### 4. 权限问题
- 检查 `AndroidManifest.xml` 中的权限声明
- 检查运行时权限（Android 6.0+）

## 快速诊断命令

```bash
# 清理并重新构建
cd BeatUClient
./gradlew clean
./gradlew assembleDebug

# 安装并查看日志
adb install -r app/build/outputs/apk/debug/app-debug.apk
adb logcat -c  # 清空日志
adb logcat | grep -E "BeatU|FATAL|AndroidRuntime"
```

## 日志级别说明

- **V** - Verbose（详细）
- **D** - Debug（调试）
- **I** - Info（信息）
- **W** - Warning（警告）
- **E** - Error（错误）
- **F** - Fatal（致命）

重点关注 **E** 和 **F** 级别的日志。

