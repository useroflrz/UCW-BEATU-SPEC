# 核心原则与工作流

## 核心原则
- 目标：实现沉浸式视频流 App，但更重要的是以架构、性能、交互和 AI 融合展示团队级工程能力和技术深度。
- **文档优先**：开始任何任务前必须先阅读并对齐以下文档——`README.md`、`docs/getting_started.md`、`docs/architecture.md`、`docs/development_plan.md`、`docs/api_reference.md`。
- 所有改动需要明确技术亮点及可量化指标（含基准数据、Profiler 截图、视频播放性能数据）。

## 工作流（文档驱动）
- 需求 -> 技术方案 -> 开发 -> 测试 -> 文档更新，链路不可缺失。
- **任务开始前**：确认任务已记录在 `docs/development_plan.md`，理解其在整体架构中的位置，并补充必要的需求/方案描述。
- **开发过程中**：遵循模块化设计，保持与既有代码一致的风格与架构边界，必要时让 Cursor 生成/校验模板代码。
- **任务完成后**：
  - 在 `docs/development_plan.md` 中将对应条目标记为 `[x]`，补充完成日期与简述。
  - 若触达架构/接口/核心流程，分别更新 `docs/architecture.md`、`docs/api_reference.md`、工作流/进度文档。
  - 记录可量化效果（播放成功率、首帧耗时、卡顿率、内存占用峰值、FPS、冷启动等）并附证据。

## 需求跟踪机制
- 任何需求、Bug、技术债都必须先写入 `docs/development_plan.md`；未登记的禁止开工。
- 完成后在清单前标记 `[x]` 并写上 `YYYY-MM-DD - done by XXX`。
- 重大变更需同步 `docs/architecture.md` 与 PR 描述，保证历史可追溯。

## 配置管理原则
- ⚠️ **优先使用配置文件**：所有可配置的参数（超时时间、URL、端口、缓存大小、分页大小、池大小等）必须优先从配置文件读取，禁止硬编码。
  - **前端 (Android)**：统一使用 `BeatUClient/app/src/main/res/values/config.xml` 管理配置参数
  - **后端 (Python)**：统一使用 `BeatUBackend/core/config.py` 和 `.env` 文件管理配置参数
- ⚠️ **配置参数生命周期管理**：
  - 当代码变更不再使用某个配置参数时，**必须同时从配置文件中删除该参数**，保持配置文件与代码的一致性
  - 删除配置参数前，确认没有其他地方引用该配置
- ⚠️ **配置参数命名规范**：
  - 使用有意义的名称，清晰表达参数用途
  - 前端使用 snake_case（如 `video_page_size`），后端使用 snake_case（如 `default_page_size`）
  - 添加配置项时，必须在配置文件中添加注释说明其用途和单位
- ⚠️ **配置参数验证**：
  - 添加新配置参数时，确保提供合理的默认值
  - 数值型配置要有合理的范围限制（如分页大小、超时时间）
- ⚠️ **环境差异化配置**：
  - 支持不同环境（开发/生产）使用不同的配置文件
  - 前端可通过 `config.xml` 和 `config_release.xml` 区分
  - 后端可通过 `.env` 文件和环境变量区分